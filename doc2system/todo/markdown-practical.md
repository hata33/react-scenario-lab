# React Scenario Lab - å®ç”¨å‹ Markdown ç¼–è¾‘å™¨æ–¹æ¡ˆ

## ğŸ¯ é‡æ–°å®šä½ï¼šè§£å†³å®é™…é—®é¢˜
åŸºäºå®é™…å¼€å‘éœ€æ±‚ï¼Œè®¾è®¡ä¸€ä¸ª**è½»é‡çº§ã€æ˜“é›†æˆã€åŠŸèƒ½å®ç”¨**çš„ Markdown ç¼–è¾‘å™¨ï¼Œä¸“æ³¨äºæ–‡æ¡£ç¼–è¾‘çš„æ ¸å¿ƒä½“éªŒï¼Œé¿å…è¿‡åº¦å·¥ç¨‹åŒ–ã€‚

### å®é™…åº”ç”¨åœºæ™¯
- **åšå®¢æ–‡ç« ç¼–è¾‘** - æ”¯æŒå®æ—¶é¢„è§ˆã€è¯­æ³•é«˜äº®ã€å›¾ç‰‡ä¸Šä¼ 
- **é¡¹ç›®æ–‡æ¡£ç¼–å†™** - æ”¯æŒæ–‡æ¡£ç›®å½•ã€ä»£ç å—é«˜äº®ã€è¡¨æ ¼ç¼–è¾‘
- **æŠ€æœ¯åˆ†äº«å¹³å°** - æ”¯æŒä»£ç ç‰‡æ®µã€æ•°å­¦å…¬å¼ã€å›¾è¡¨åµŒå…¥
- **ä¸ªäººçŸ¥è¯†åº“** - æ”¯æŒæ ‡ç­¾åˆ†ç±»ã€å…¨æ–‡æœç´¢ã€å¯¼å‡ºåŠŸèƒ½

## ğŸ“‹ æ ¸å¿ƒåŠŸèƒ½è§„åˆ’

### P0 - åŸºç¡€åŠŸèƒ½ (1-2å‘¨)
- [ ] **å®æ—¶é¢„è§ˆç¼–è¾‘å™¨** - å·¦å³åˆ†å±ï¼Œå®æ—¶æ¸²æŸ“ | High | 1å‘¨
  - ä½¿ç”¨ `@uiw/react-md-editor` æˆ– `react-markdown` + `textarea`
  - æ”¯æŒæ»šåŠ¨åŒæ­¥å’Œè¯­æ³•é«˜äº®
  - åŸºç¡€ Markdown è¯­æ³•æ”¯æŒ

- [ ] **å·¥å…·æ åŠŸèƒ½** - å¸¸ç”¨æ ¼å¼åŒ–å¿«æ·æ“ä½œ | Medium | 3å¤©
  - åŠ ç²—ã€æ–œä½“ã€æ ‡é¢˜ã€é“¾æ¥ã€å›¾ç‰‡ã€ä»£ç å—
  - é”®ç›˜å¿«æ·é”®æ”¯æŒ (Ctrl+B, Ctrl+I ç­‰)
  - æ’¤é”€/é‡åšåŠŸèƒ½

- [ ] **ä»£ç å—å¢å¼º** - è¯­æ³•é«˜äº®å’Œå¤åˆ¶åŠŸèƒ½ | Medium | 2å¤©
  - ä½¿ç”¨ `prismjs` æˆ– `highlight.js`
  - æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€
  - ä¸€é”®å¤åˆ¶ä»£ç åŠŸèƒ½

### P1 - å¢å¼ºåŠŸèƒ½ (1-2å‘¨)
- [ ] **å›¾ç‰‡å¤„ç†** - æ‹–æ‹½ä¸Šä¼ ã€ç²˜è´´ä¸Šä¼ ã€é¢„è§ˆ | Medium | 3å¤©
  - æ”¯æŒæ‹–æ‹½å’Œç²˜è´´ä¸Šä¼ 
  - å›¾ç‰‡å‹ç¼©å’Œæ ¼å¼è½¬æ¢
  - æœ¬åœ°é¢„è§ˆå’ŒURLç®¡ç†

- [ ] **æ‰©å±•è¯­æ³•** - è¡¨æ ¼ç¼–è¾‘å™¨ã€æ•°å­¦å…¬å¼ | Medium | 4å¤©
  - å¯è§†åŒ–è¡¨æ ¼ç¼–è¾‘å™¨
  - KaTeX æ•°å­¦å…¬å¼æ”¯æŒ
  - ä»»åŠ¡åˆ—è¡¨å’Œè„šæ³¨

- [ ] **æ–‡æ¡£ç®¡ç†** - è‡ªåŠ¨ä¿å­˜ã€ç‰ˆæœ¬å†å²ã€å¯¼å‡º | Medium | 3å¤©
  - LocalStorage è‡ªåŠ¨ä¿å­˜
  - ç®€å•çš„ç‰ˆæœ¬å†å²è®°å½•
  - æ”¯æŒ HTMLã€PDF å¯¼å‡º

### P2 - é«˜çº§åŠŸèƒ½ (å¯é€‰)
- [ ] **æ’ä»¶ç³»ç»Ÿ** - è‡ªå®šä¹‰è¯­æ³•æ‰©å±• | Low | 1å‘¨
- [ ] **åä½œç¼–è¾‘** - ç®€å•çš„å¤šäººç¼–è¾‘æ”¯æŒ | Low | 2å‘¨
- [ ] **å…¨æ–‡æœç´¢** - æ–‡æ¡£å†…å®¹æœç´¢å’Œé«˜äº® | Low | 1å‘¨

## ğŸ› ï¸ æŠ€æœ¯é€‰å‹ (å®ç”¨ä¼˜å…ˆ)

### æ ¸å¿ƒç¼–è¾‘å™¨
```typescript
// æ¨èæ–¹æ¡ˆ1: react-md-editor (ä¸€ä½“åŒ–è§£å†³æ–¹æ¡ˆ)
import MDEditor from '@uiw/react-md-editor';

// æ¨èæ–¹æ¡ˆ2: react-markdown + textarea (çµæ´»å®šåˆ¶)
import ReactMarkdown from 'react-markdown';
import remarkGfm from 'remark-gfm';
import rehypeHighlight from 'rehype-highlight';
```

**é€‰å‹å¯¹æ¯”:**
- `@uiw/react-md-editor`: åŠŸèƒ½å®Œæ•´ï¼Œå¼€ç®±å³ç”¨ï¼Œé€‚åˆå¿«é€Ÿå¼€å‘
- `react-markdown + textarea`: æ›´çµæ´»ï¼Œå¯å®šåˆ¶æ€§å¼ºï¼Œé€‚åˆç‰¹æ®Šéœ€æ±‚
- `toast-ui/editor`: åŠŸèƒ½å¼ºå¤§ï¼Œä½†ä½“ç§¯è¾ƒå¤§ï¼Œé€‚åˆå¤æ‚åœºæ™¯

### è¯­æ³•é«˜äº®
```typescript
// ä½¿ç”¨ highlight.js
import hljs from 'highlight.js';

// æˆ–è€…ä½¿ç”¨ prismjs
import Prism from 'prismjs';
import 'prismjs/components/prism-javascript';
import 'prismjs/components/prism-python';
```

### æ•°å­¦å…¬å¼
```typescript
// ä½¿ç”¨ KaTeX
import 'katex/dist/katex.min.css';
import { InlineMath, BlockMath } from 'react-katex';
```

## ğŸ“ ç»„ä»¶æ¶æ„è®¾è®¡

### æ ¸å¿ƒç»„ä»¶ç»“æ„
```
MarkdownEditor/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ MarkdownEditor.tsx      // ä¸»ç¼–è¾‘å™¨ç»„ä»¶
â”‚   â”œâ”€â”€ MarkdownPreview.tsx     // é¢„è§ˆç»„ä»¶
â”‚   â”œâ”€â”€ ToolBar.tsx             // å·¥å…·æ 
â”‚   â”œâ”€â”€ ImageUpload.tsx          // å›¾ç‰‡ä¸Šä¼ 
â”‚   â””â”€â”€ TableEditor.tsx          // è¡¨æ ¼ç¼–è¾‘å™¨
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useMarkdown.ts          // Markdown å¤„ç†é€»è¾‘
â”‚   â”œâ”€â”€ useAutoSave.ts          // è‡ªåŠ¨ä¿å­˜
â”‚   â””â”€â”€ useShortcuts.ts         // å¿«æ·é”®
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ parser.ts               // Markdown è§£æ
â”‚   â”œâ”€â”€ shortcuts.ts            // å¿«æ·é”®å®šä¹‰
â”‚   â””â”€â”€ export.ts               // å¯¼å‡ºåŠŸèƒ½
â””â”€â”€ types/
    â””â”€â”€ index.ts                // ç±»å‹å®šä¹‰
```

### æ ¸å¿ƒæ¥å£è®¾è®¡
```typescript
interface MarkdownEditorProps {
  value: string;
  onChange: (value: string) => void;
  placeholder?: string;
  height?: number;
  preview?: boolean;
  toolbar?: boolean;
  autoSave?: boolean;
  shortcuts?: boolean;
}

interface ToolBarProps {
  onAction: (action: string, value?: any) => void;
  disabled?: boolean;
  items?: ToolBarItem[];
}

interface ImageUploadProps {
  onUpload: (file: File) => Promise<string>;
  accept?: string;
  maxSize?: number;
}
```

## ğŸ¨ å®ç”¨åŠŸèƒ½å®ç°

### 1. å®æ—¶é¢„è§ˆç¼–è¾‘å™¨
```typescript
const MarkdownEditor = () => {
  const [value, setValue] = useState('# Hello World\n\nThis is a **markdown** editor.');
  const [preview, setPreview] = useState(true);

  return (
    <div className="flex h-96">
      <div className="w-1/2 border-r">
        <textarea
          value={value}
          onChange={(e) => setValue(e.target.value)}
          className="w-full h-full p-4 resize-none focus:outline-none"
          placeholder="å¼€å§‹è¾“å…¥ Markdown..."
        />
      </div>
      <div className="w-1/2 p-4 overflow-auto">
        <ReactMarkdown remarkPlugins={[remarkGfm]}>
          {value}
        </ReactMarkdown>
      </div>
    </div>
  );
};
```

### 2. å®ç”¨å·¥å…·æ 
```typescript
const ToolBar = ({ onAction }) => {
  const actions = [
    { icon: 'B', action: 'bold', shortcut: 'Ctrl+B' },
    { icon: 'I', action: 'italic', shortcut: 'Ctrl+I' },
    { icon: 'H', action: 'heading', shortcut: 'Ctrl+H' },
    { icon: 'ğŸ”—', action: 'link', shortcut: 'Ctrl+K' },
    { icon: 'ğŸ“·', action: 'image', shortcut: 'Ctrl+G' },
    { icon: 'ğŸ’»', action: 'code', shortcut: 'Ctrl+`' },
  ];

  return (
    <div className="flex gap-2 p-2 border-b">
      {actions.map(item => (
        <button
          key={item.action}
          onClick={() => onAction(item.action)}
          className="p-2 hover:bg-gray-100 rounded"
          title={`${item.shortcut}`}
        >
          {item.icon}
        </button>
      ))}
    </div>
  );
};
```

### 3. å›¾ç‰‡ä¸Šä¼ åŠŸèƒ½
```typescript
const ImageUpload = ({ onUpload }) => {
  const handleFileSelect = async (e) => {
    const file = e.target.files?.[0];
    if (file) {
      // å‹ç¼©å›¾ç‰‡
      const compressed = await compressImage(file);
      // ä¸Šä¼ åˆ°æœåŠ¡å™¨æˆ–è½¬æ¢ä¸º base64
      const url = await onUpload(compressed);
      // æ’å…¥åˆ°ç¼–è¾‘å™¨
      insertImageToEditor(url);
    }
  };

  return (
    <input
      type="file"
      accept="image/*"
      onChange={handleFileSelect}
      className="hidden"
      id="image-upload"
    />
  );
};
```

## ğŸ“± å“åº”å¼è®¾è®¡

### ç§»åŠ¨ç«¯é€‚é…
```css
/* å°å±å¹•å‚ç›´å¸ƒå±€ */
.markdown-editor {
  @media (max-width: 768px) {
    flex-direction: column;
    height: auto;
  }
}

.toolbar {
  @media (max-width: 768px) {
    flex-wrap: wrap;
    gap: 1px;
  }
}

.toolbar button {
  @media (max-width: 768px) {
    flex: 1;
    min-width: 40px;
  }
}
```

### è§¦æ‘¸ä¼˜åŒ–
```typescript
// æ”¯æŒè§¦æ‘¸è®¾å¤‡çš„å·¥å…·æ 
const TouchFriendlyToolBar = () => {
  return (
    <div className="toolbar touch-friendly">
      {/* æ›´å¤§çš„ç‚¹å‡»åŒºåŸŸ */}
      <button className="touch-target">
        <span className="icon">B</span>
      </button>
    </div>
  );
};
```

## ğŸš€ æ€§èƒ½ä¼˜åŒ–

### 1. æ¸²æŸ“ä¼˜åŒ–
```typescript
// ä½¿ç”¨ React.memo ä¼˜åŒ–é¢„è§ˆç»„ä»¶
const MarkdownPreview = React.memo(({ content }) => {
  return (
    <div className="markdown-preview">
      <ReactMarkdown remarkPlugins={[remarkGfm]}>
        {content}
      </ReactMarkdown>
    </div>
  );
});

// ä½¿ç”¨é˜²æŠ–ä¼˜åŒ–è¾“å…¥
const debouncedOnChange = useMemo(
  () => debounce(onChange, 300),
  [onChange]
);
```

### 2. å¤§æ–‡ä»¶å¤„ç†
```typescript
// è™šæ‹Ÿæ»šåŠ¨æ”¯æŒ
const VirtualScrollPreview = ({ content }) => {
  const [visibleRange, setVisibleRange] = useState({ start: 0, end: 100 });

  // åªæ¸²æŸ“å¯è§éƒ¨åˆ†
  const visibleContent = useMemo(() => {
    const lines = content.split('\n');
    return lines.slice(visibleRange.start, visibleRange.end).join('\n');
  }, [content, visibleRange]);

  return <div>{visibleContent}</div>;
};
```

## ğŸ”§ å®é™…å¼€å‘å»ºè®®

### 1. æ¸è¿›å¼å¼€å‘
```typescript
// ç¬¬ä¸€é˜¶æ®µï¼šåŸºç¡€ç¼–è¾‘å™¨
const BasicMarkdownEditor = () => {
  // åªå®ç°åŸºç¡€åŠŸèƒ½
};

// ç¬¬äºŒé˜¶æ®µï¼šå¢å¼ºåŠŸèƒ½
const EnhancedMarkdownEditor = () => {
  // æ·»åŠ å·¥å…·æ ã€å›¾ç‰‡ä¸Šä¼ ç­‰
};

// ç¬¬ä¸‰é˜¶æ®µï¼šé«˜çº§åŠŸèƒ½
const AdvancedMarkdownEditor = () => {
  // æ·»åŠ åä½œã€æ’ä»¶ç³»ç»Ÿç­‰
};
```

### 2. å¯é…ç½®è®¾è®¡
```typescript
interface MarkdownConfig {
  toolbar?: boolean;
  preview?: boolean;
  autoSave?: boolean;
  shortcuts?: boolean;
  theme?: 'light' | 'dark';
  height?: number;
}

const MarkdownEditor = ({ config }: { config?: MarkdownConfig }) => {
  const {
    toolbar = true,
    preview = true,
    autoSave = false,
    shortcuts = true,
    theme = 'light',
    height = 400
  } = config || {};

  // æ ¹æ®é…ç½®æ¸²æŸ“ç»„ä»¶
};
```

### 3. ä¸»é¢˜æ”¯æŒ
```css
/* æ”¯æŒæš—è‰²ä¸»é¢˜ */
.markdown-editor.dark {
  background-color: #1a1a1a;
  color: #e0e0e0;
}

.markdown-editor.dark textarea {
  background-color: #2d2d2d;
  color: #e0e0e0;
}

.markdown-editor.dark .markdown-preview {
  background-color: #2d2d2d;
}
```

## ğŸ“‹ å®é™…å¼€å‘è·¯çº¿å›¾

### Week 1: åŸºç¡€åŠŸèƒ½
- [ ] æ­å»ºé¡¹ç›®ç»“æ„å’ŒåŸºç¡€ç»„ä»¶
- [ ] å®ç°å·¦å³åˆ†å±ç¼–è¾‘å™¨
- [ ] é›†æˆ react-markdown é¢„è§ˆ
- [ ] æ·»åŠ åŸºç¡€å·¥å…·æ åŠŸèƒ½

### Week 2: å¢å¼ºåŠŸèƒ½
- [ ] å®ç°å›¾ç‰‡ä¸Šä¼ å’Œç®¡ç†
- [ ] æ·»åŠ ä»£ç å—è¯­æ³•é«˜äº®
- [ ] æ”¯æŒæ‰©å±•è¯­æ³• (è¡¨æ ¼ã€æ•°å­¦å…¬å¼)
- [ ] å®ç°è‡ªåŠ¨ä¿å­˜åŠŸèƒ½

### Week 3: ä¼˜åŒ–å®Œå–„
- [ ] å“åº”å¼è®¾è®¡å’Œç§»åŠ¨ç«¯é€‚é…
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œè™šæ‹Ÿæ»šåŠ¨
- [ ] é”™è¯¯å¤„ç†å’Œç”¨æˆ·ä½“éªŒä¼˜åŒ–
- [ ] æ–‡æ¡£å’Œæµ‹è¯•

## ğŸ’¡ å…³é”®æŠ€æœ¯å†³ç­–

### 1. é¿å…è¿‡åº¦å·¥ç¨‹åŒ–
- **ä¸å®ç°å¤æ‚çš„åä½œç®—æ³•** - å¤§å¤šæ•°åº”ç”¨ä¸éœ€è¦å®æ—¶åä½œ
- **ä¸ä½¿ç”¨ Monoca Editor** - è¿™æ˜¯ä»£ç ç¼–è¾‘å™¨ï¼Œä¸é€‚åˆæ–‡æ¡£ç¼–è¾‘
- **ä¸é‡æ–°å‘æ˜è½®å­** - ä¼˜å…ˆä½¿ç”¨æˆç†Ÿçš„å¼€æºåº“

### 2. ä¸“æ³¨æ ¸å¿ƒä½“éªŒ
- **ç¼–è¾‘ä½“éªŒ** - æµç•…çš„è¾“å…¥å’Œé¢„è§ˆ
- **æ€§èƒ½è¡¨ç°** - å¿«é€Ÿå“åº”å’Œå¤§æ–‡ä»¶æ”¯æŒ
- **æ˜“ç”¨æ€§** - ç›´è§‚çš„å·¥å…·æ å’Œå¿«æ·é”®

### 3. å¯æ‰©å±•è®¾è®¡
- **æ’ä»¶åŒ–æ¶æ„** - æ”¯æŒåŠŸèƒ½æ‰©å±•
- **ä¸»é¢˜ç³»ç»Ÿ** - æ”¯æŒå¤šç§å¤–è§‚
- **é…ç½®åŒ–** - æ”¯æŒä¸åŒçš„ä½¿ç”¨åœºæ™¯

## ğŸ¯ å®é™…ä»·å€¼

### æŠ€æœ¯ä»·å€¼
- æŒæ¡ Markdown ç¼–è¾‘å™¨çš„æ ¸å¿ƒåŸç†
- ç†è§£å®æ—¶é¢„è§ˆå’Œè¯­æ³•é«˜äº®çš„å®ç°
- å­¦ä¼šç»„ä»¶åŒ–è®¾è®¡å’Œæ€§èƒ½ä¼˜åŒ–

### ä¸šåŠ¡ä»·å€¼
- æä¾›å¼€ç®±å³ç”¨çš„ Markdown ç¼–è¾‘å™¨
- æ”¯æŒå¤šç§ä¸šåŠ¡åœºæ™¯ (åšå®¢ã€æ–‡æ¡£ã€çŸ¥è¯†åº“)
- æå‡å†…å®¹åˆ›ä½œå’Œç¼–è¾‘æ•ˆç‡

### å­¦ä¹ ä»·å€¼
- React ç»„ä»¶è®¾è®¡å’ŒçŠ¶æ€ç®¡ç†
- æ–‡æœ¬å¤„ç†å’Œè§£ææŠ€æœ¯
- å‰ç«¯æ€§èƒ½ä¼˜åŒ–å’Œç”¨æˆ·ä½“éªŒ

è¿™ä¸ªæ–¹æ¡ˆæ›´è´´è¿‘å®é™…å¼€å‘éœ€æ±‚ï¼Œé¿å…äº†è¿‡åº¦å¤æ‚åŒ–ï¼Œä¸“æ³¨äºæ ¸å¿ƒåŠŸèƒ½å®ç°ï¼Œé€‚åˆå¿«é€Ÿé›†æˆå’Œéƒ¨ç½²ã€‚