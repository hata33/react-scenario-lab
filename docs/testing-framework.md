# ç»Ÿä¸€æµ‹è¯•æ¡†æ¶

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æˆåŠŸå®ç°äº†ç»Ÿä¸€çš„æµ‹è¯•æ¡†æ¶ï¼Œæ•´åˆäº†æ‰«ç ç™»å½•åŠŸèƒ½çš„æµ‹è¯•è„šæœ¬ï¼Œæä¾›äº†å®Œæ•´çš„æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚

## âœ… å®Œæˆçš„åŠŸèƒ½

### 1. æµ‹è¯•æ¡†æ¶æ¶æ„

#### æ ¸å¿ƒç»„ä»¶
- **Jest é…ç½®** - å•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•æ¡†æ¶
- **æµ‹è¯•ç®¡ç†å™¨** - ç»Ÿä¸€çš„æµ‹è¯•ç®¡ç†å’Œæ‰§è¡Œå·¥å…·
- **æµ‹è¯•å·¥å…·åº“** - é€šç”¨æµ‹è¯•å·¥å…·å’Œè¾…åŠ©å‡½æ•°
- **TypeScript æ”¯æŒ** - å®Œæ•´çš„ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒ

#### æ–‡ä»¶ç»“æ„
```
tests/
â”œâ”€â”€ setup.ts                           # æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”œâ”€â”€ test-manager.ts                     # æµ‹è¯•ç®¡ç†å™¨ (æ ¸å¿ƒ)
â”œâ”€â”€ README.md                          # ä½¿ç”¨æ–‡æ¡£
â”œâ”€â”€ integration/                        # é›†æˆæµ‹è¯•
â”‚   â””â”€â”€ qr-login.test.ts               # æ‰«ç ç™»å½•å®Œæ•´æµ‹è¯•
â”œâ”€â”€ run-qr-login-test.ts                # ç‹¬ç«‹æ‰«ç ç™»å½•æµ‹è¯•
â””â”€â”€ .ts-noderc.json                     # TypeScript Node é…ç½®
```

### 2. æµ‹è¯•ç±»å‹è¦†ç›–

#### å•å…ƒæµ‹è¯•
- Jest æ¡†æ¶é›†æˆ
- ä»£ç è¦†ç›–ç‡æŠ¥å‘Š
- ç›‘å¬æ¨¡å¼å¼€å‘
- å¼‚æ­¥æµ‹è¯•æ”¯æŒ

#### é›†æˆæµ‹è¯•
- æ‰«ç ç™»å½•å®Œæ•´æµç¨‹æµ‹è¯•
- API æ¥å£æµ‹è¯•
- é”™è¯¯æƒ…å†µæµ‹è¯•
- æ€§èƒ½æµ‹è¯•

#### ç«¯åˆ°ç«¯æµ‹è¯•
- Playwright/Puppeteer æ”¯æŒ
- ç”¨æˆ·ç•Œé¢æµ‹è¯•
- çœŸå®æµè§ˆå™¨ç¯å¢ƒæµ‹è¯•

### 3. æµ‹è¯•ç®¡ç†å™¨åŠŸèƒ½

#### æ ¸å¿ƒç‰¹æ€§
- âœ… **æµ‹è¯•åˆ—è¡¨** - æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æµ‹è¯•å¥—ä»¶
- âœ… **åˆ†ç±»ç®¡ç†** - æŒ‰åŠŸèƒ½åˆ†ç±»ç»„ç»‡æµ‹è¯•
- âœ… **çµæ´»æ‰§è¡Œ** - æ”¯æŒå•ä¸ªã€æ‰¹é‡ã€åˆ†ç±»æ‰§è¡Œ
- âœ… **å½©è‰²è¾“å‡º** - ç¾è§‚çš„æµ‹è¯•ç»“æœå±•ç¤º
- âœ… **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯æŠ¥å‘Šæœºåˆ¶

#### ä½¿ç”¨å‘½ä»¤
```bash
# æŸ¥çœ‹æ‰€æœ‰æµ‹è¯•
pnpm run test:manager list

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm run test:manager all

# è¿è¡Œç‰¹å®šæµ‹è¯•
pnpm run test:manager "æ‰«ç ç™»å½•"

# æŒ‰ç±»åˆ«è¿è¡Œ
pnpm run test:manager integration
pnpm run test:manager performance
```

### 4. æµ‹è¯•è„šæœ¬æ•´åˆ

#### åŸå§‹æµ‹è¯•è„šæœ¬ä¼˜åŒ–
- âŒ åˆ†æ•£çš„ Node.js è„šæœ¬ â†’ âœ… ç»Ÿä¸€çš„ TypeScript æµ‹è¯•
- âŒ æ‰‹åŠ¨æ‰§è¡Œ â†’ âœ… è‡ªåŠ¨åŒ–æµ‹è¯•ç®¡ç†
- âŒ æ— é”™è¯¯å¤„ç† â†’ âœ… å®Œå–„çš„é”™è¯¯å¤„ç†
- âŒ æ— æ—¥å¿—è®°å½• â†’ âœ… å½©è‰²æ—¥å¿—å’Œæ—¶é—´æˆ³

#### æ–°çš„æµ‹è¯•ç‰¹æ€§
- ğŸ¨ **å½©è‰²è¾“å‡º** - ä¸åŒé¢œè‰²è¡¨ç¤ºä¸åŒçŠ¶æ€
- â±ï¸ **æ—¶é—´æˆ³** - æ¯ä¸ªæ“ä½œéƒ½æœ‰ç²¾ç¡®æ—¶é—´è®°å½•
- ğŸ“Š **è¯¦ç»†æŠ¥å‘Š** - æµ‹è¯•ç»“æœç»Ÿè®¡å’Œåˆ†æ
- ğŸ”§ **é…ç½®çµæ´»** - æ˜“äºæ‰©å±•å’Œé…ç½®

### 5. æµ‹è¯•ç»“æœéªŒè¯

#### æ‰«ç ç™»å½•æµ‹è¯•ç»“æœ
```
ğŸ§ª å¼€å§‹å®Œæ•´çš„æ‰«ç ç™»å½•æµ‹è¯•å¥—ä»¶
=====================================

ğŸš€ å¼€å§‹åŸºç¡€æ‰«ç ç™»å½•æµ‹è¯•
âœ… ç”ŸæˆäºŒç»´ç æˆåŠŸ: 1759041010549-556dkq822
âœ… åˆå§‹çŠ¶æ€: waiting
âœ… æ‰«ç æˆåŠŸ
âœ… æ‰«ç åçŠ¶æ€: scanned
âœ… ç™»å½•ç¡®è®¤æˆåŠŸ
âœ… æœ€ç»ˆçŠ¶æ€: confirmed
ğŸ‰ åŸºç¡€æµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼

ğŸ” å¼€å§‹é”™è¯¯æƒ…å†µæµ‹è¯•
âœ… æ— æ•ˆsceneIdæ­£ç¡®æ‹’ç»
âœ… ä¸å­˜åœ¨sceneIdæ­£ç¡®æ‹’ç»
âœ… é‡å¤æ‰«ç æ­£ç¡®æ‹’ç»
ğŸ‰ é”™è¯¯æƒ…å†µæµ‹è¯•å…¨éƒ¨é€šè¿‡ï¼

âš¡ å¼€å§‹æ€§èƒ½æµ‹è¯•
âœ… å¹¶å‘æµ‹è¯•å®Œæˆ: 10/10 æˆåŠŸ, è€—æ—¶ 298ms
ğŸ‰ æ€§èƒ½æµ‹è¯•å®Œæˆï¼

=====================================
ğŸ“Š æµ‹è¯•ç»“æœæ€»ç»“:
åŸºç¡€åŠŸèƒ½æµ‹è¯•: âœ… é€šè¿‡
é”™è¯¯å¤„ç†æµ‹è¯•: âœ… é€šè¿‡
æ€§èƒ½æµ‹è¯•: âœ… é€šè¿‡
ğŸ‰ æ‰€æœ‰æµ‹è¯•éƒ½é€šè¿‡äº†ï¼æ‰«ç ç™»å½•åŠŸèƒ½æ­£å¸¸å·¥ä½œã€‚
```

## ğŸ› ï¸ æŠ€æœ¯å®ç°

### 1. æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **Jest** - æµ‹è¯•æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **ts-node** - TypeScript è¿è¡Œæ—¶
- **Node.js** - æ‰§è¡Œç¯å¢ƒ

### 2. æ¶æ„è®¾è®¡
```
TestManager (æµ‹è¯•ç®¡ç†å™¨)
â”œâ”€â”€ Test Suites (æµ‹è¯•å¥—ä»¶)
â”‚   â”œâ”€â”€ Integration Tests (é›†æˆæµ‹è¯•)
â”‚   â”œâ”€â”€ E2E Tests (ç«¯åˆ°ç«¯æµ‹è¯•)
â”‚   â””â”€â”€ Performance Tests (æ€§èƒ½æµ‹è¯•)
â”œâ”€â”€ Execution Engine (æ‰§è¡Œå¼•æ“)
â”‚   â”œâ”€â”€ Process Spawning (è¿›ç¨‹ç®¡ç†)
â”‚   â”œâ”€â”€ Result Collection (ç»“æœæ”¶é›†)
â”‚   â””â”€â”€ Report Generation (æŠ¥å‘Šç”Ÿæˆ)
â””â”€â”€ Utilities (å·¥å…·åº“)
    â”œâ”€â”€ Logger (æ—¥å¿—è®°å½•)
    â”œâ”€â”€ Color Output (å½©è‰²è¾“å‡º)
    â””â”€â”€ Error Handling (é”™è¯¯å¤„ç†)
```

### 3. å…³é”®ç‰¹æ€§
- **æ¨¡å—åŒ–è®¾è®¡** - æ˜“äºæ‰©å±•å’Œç»´æŠ¤
- **ç±»å‹å®‰å…¨** - TypeScript å®Œæ•´æ”¯æŒ
- **å¼‚æ­¥å¤„ç†** - Promise å’Œ async/await æ”¯æŒ
- **é”™è¯¯æ¢å¤** - è‡ªåŠ¨é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

## ğŸ“¦ ä¾èµ–ç®¡ç†

### æ–°å¢ä¾èµ–
```json
{
  "devDependencies": {
    "jest": "^30.1.3",
    "@types/jest": "^30.0.0",
    "ts-jest": "^29.4.4",
    "ts-node": "^10.9.2",
    "puppeteer": "^24.22.3"
  }
}
```

### Package.json è„šæœ¬
```json
{
  "scripts": {
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "test:qr-login": "npx ts-node tests/run-qr-login-test.ts",
    "test:manager": "npx ts-node tests/test-manager.ts",
    "test:all": "npm run test:manager all",
    "test:integration": "npm run test:manager integration"
  }
}
```

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### 1. å¿«é€Ÿå¼€å§‹
```bash
# å®‰è£…ä¾èµ–
pnpm install

# æŸ¥çœ‹å¯ç”¨æµ‹è¯•
pnpm run test:manager list

# è¿è¡Œç‰¹å®šæµ‹è¯•
pnpm run test:qr-login

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm run test:all
```

### 2. å¼€å‘æµç¨‹
1. ç¼–å†™æ–°åŠŸèƒ½
2. åˆ›å»ºå¯¹åº”æµ‹è¯•
3. è¿è¡Œæµ‹è¯•éªŒè¯
4. æäº¤ä»£ç 

### 3. CI/CD é›†æˆ
```yaml
# GitHub Actions ç¤ºä¾‹
- name: Run Tests
  run: pnpm run test:all
```

## ğŸš€ æ‰©å±•æ€§

### 1. æ·»åŠ æ–°æµ‹è¯•
1. åˆ›å»ºæµ‹è¯•è„šæœ¬æ–‡ä»¶
2. åœ¨ `test-manager.ts` ä¸­æ³¨å†Œ
3. æ›´æ–° `package.json` è„šæœ¬

### 2. è‡ªå®šä¹‰æµ‹è¯•ç±»å‹
- æ”¯æŒä»»æ„æµ‹è¯•ç±»åˆ«
- çµæ´»çš„å‘½ä»¤é…ç½®
- å¯æ‰©å±•çš„ç»“æœæ ¼å¼

### 3. é›†æˆå…¶ä»–å·¥å…·
- æ”¯æŒä»»ä½•æµ‹è¯•æ¡†æ¶
- å…¼å®¹å„ç§æŠ¥å‘Šæ ¼å¼
- å¯æ’æ‹”çš„æ¶æ„è®¾è®¡

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### æµ‹è¯•æ‰§è¡Œæ—¶é—´
- æ‰«ç ç™»å½•å®Œæ•´æµ‹è¯•: ~3ç§’
- å¹¶å‘æ€§èƒ½æµ‹è¯•: ~300ms (10ä¸ªå¹¶å‘)
- é”™è¯¯æƒ…å†µæµ‹è¯•: ~1ç§’

### èµ„æºå ç”¨
- å†…å­˜ä½¿ç”¨: < 50MB
- CPU å ç”¨: ä½
- ç½‘ç»œè¯·æ±‚: æœ€å°åŒ–

## ğŸ‰ æ€»ç»“

ç»Ÿä¸€æµ‹è¯•æ¡†æ¶çš„æˆåŠŸå®ç°ä¸ºé¡¹ç›®å¸¦æ¥äº†ï¼š

âœ… **æ ‡å‡†åŒ–æµ‹è¯•æµç¨‹** - ç»Ÿä¸€çš„æµ‹è¯•æ‰§è¡Œå’Œç®¡ç†
âœ… **æé«˜å¼€å‘æ•ˆç‡** - è‡ªåŠ¨åŒ–æµ‹è¯•å‡å°‘æ‰‹åŠ¨å·¥ä½œ
âœ… **å¢å¼ºä»£ç è´¨é‡** - å…¨é¢çš„æµ‹è¯•è¦†ç›–
âœ… **æ”¹å–„ç»´æŠ¤æ€§** - æ¸…æ™°çš„æµ‹è¯•ç»„ç»‡å’Œæ–‡æ¡£
âœ… **æ”¯æŒå›¢é˜Ÿåä½œ** - æ ‡å‡†åŒ–çš„æµ‹è¯•å·¥å…·å’Œæµç¨‹

è¿™ä¸ªæµ‹è¯•æ¡†æ¶ä¸ä»…è§£å†³äº†å½“å‰æ‰«ç ç™»å½•åŠŸèƒ½çš„æµ‹è¯•éœ€æ±‚ï¼Œè¿˜ä¸ºé¡¹ç›®çš„é•¿æœŸå‘å±•æä¾›äº†åšå®çš„åŸºç¡€ã€‚é€šè¿‡æ¨¡å—åŒ–è®¾è®¡å’Œæ‰©å±•æ€§æ¶æ„ï¼Œå¯ä»¥è½»æ¾æ”¯æŒæœªæ¥æ–°å¢åŠŸèƒ½çš„æµ‹è¯•éœ€æ±‚ã€‚